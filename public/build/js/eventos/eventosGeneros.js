import{validarAlfanumerico,validarLongitud}from"../validadores/validaciones.js";import{mostrarError,mostrarExito,habilitarBoton}from"../doms/dom.js";const nameInput=document.getElementById("name"),descriptionInput=document.getElementById("description");export function inicializarEventos(){nameInput.addEventListener("input",validarNombreEnTiempoReal),descriptionInput.addEventListener("input",validarDescripcionEnTiempoReal),document.querySelector("#genreForm").addEventListener("submit",manejarSubmit),window.addEventListener("load",(()=>habilitarBoton("genreForm",!1)))}function validarNombreEnTiempoReal(){""===this.value.trim()?mostrarError("name","Por favor, ingresa el nombre del género."):validarAlfanumerico(this.value)?validarLongitud(this.value,30)?mostrarExito("name"):mostrarError("name","El nombre puede contener máximo 30 caracteres."):mostrarError("name","Formato de nombre no válido."),actualizarEstadoBoton()}function validarDescripcionEnTiempoReal(){""===this.value.trim()?mostrarError("description","Por favor, ingresa una descripción."):validarAlfanumerico(this.value)?validarLongitud(this.value,200)?mostrarExito("description"):mostrarError("description","La descripción puede contener máximo 200 caracteres."):mostrarError("description","El formato de la descripción es inválido."),actualizarEstadoBoton()}function manejarSubmit(r){const o=nameInput.value.trim(),a=descriptionInput.value.trim();let e=0;""===o?(mostrarError("name","Por favor, ingresa el nombre del género."),e++):validarAlfanumerico(o)?validarLongitud(o,30)?mostrarExito("name"):(mostrarError("name","El nombre puede contener máximo 30 caracteres."),e++):(mostrarError("name","El nombre no cumple con un formato válido."),e++),""===a?(mostrarError("description","Por favor, ingresa una descripción."),e++):validarLongitud(a,200)?mostrarExito("description"):(mostrarError("description","La descripción puede contener máximo 200 caracteres."),e++),e>0&&r.preventDefault()}function actualizarEstadoBoton(){habilitarBoton("genreForm",sonTodosLosCamposValidos())}function sonTodosLosCamposValidos(){const r=validarAlfanumerico(nameInput.value)&&validarLongitud(nameInput.value,30),o=validarAlfanumerico(descriptionInput.value)&&validarLongitud(descriptionInput.value,200);return r&&o}